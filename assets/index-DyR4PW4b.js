import{C as Z,S as ke,a as Ae,F as qe,H as Te,b as Me,D as Fe,c as Oe,A as He,P as Ie,d as Je,W as We,e as Ne,V as D,R as $,O as je,G as pe,B as M}from"./three-D1RZ3Z0q.js";import{O as c}from"./@dimforge-D3Mqfikn.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=a(s);fetch(s.href,n)}})();function ee(e,a){e.geometry.computeBoundingBox(),a.forEach(function(n,o,m){n.children.length>0?n.children.forEach(function(L,r,v){L.geometry.computeBoundingBox()}):n.geometry.computeBoundingBox()}),e.updateMatrixWorld(),a.forEach(function(n,o,m){n.updateMatrixWorld()});let i=e.geometry.boundingBox.clone();i.applyMatrix4(e.matrixWorld);var s=!1;return a.forEach(function(n,o,m){if(n.children.length>0)n.children.forEach(function(L,r,v){let me=L.geometry.boundingBox.clone();me.applyMatrix4(L.matrixWorld),i.intersectsBox(me)&&(s=L)});else{let L=n.geometry.boundingBox.clone();L.applyMatrix4(n.matrixWorld),i.intersectsBox(L)&&(s=n)}}),s}function ye(){let e=window.matchMedia||window.msMatchMedia;return e?e("(pointer:coarse)").matches:!1}let K=document.querySelector(".main_load"),De=document.querySelector(".main_menu"),Ge=document.querySelector(".select_level"),Ke=document.querySelector(".select_tube"),Pe=document.querySelector(".finish_window"),Ue=document.querySelector(".finish_you_time span"),Ve=document.querySelectorAll("body>.overlay"),Xe=document.querySelector(".startButton"),Ye=document.querySelectorAll(".load_level_wrap>div"),Qe=document.querySelectorAll(".load_level_wrap .level_time"),Ze=document.querySelectorAll(".load_tubes_wrap>div"),he=[],ge=[],te=document.querySelector(".current_time"),fe=document.querySelector(".best_time"),$e=document.querySelector(".finish_again"),et=document.querySelector(".finish_in_menu"),we=document.querySelector(".speed_block>.speed"),tt=document.querySelector(".shadow_check"),P=document.querySelector(".load_percent"),ae=document.querySelector(".pause_button"),at=document.querySelector(".close_pause_button"),nt=document.querySelector(".reset_button"),it=document.querySelector(".inmenu_button"),ot=document.querySelector(".menu_in_game_wrap"),xe=document.querySelector(".start_time"),Se=document.querySelector(".start_time_wrap");Ye.forEach((e,a)=>{e.addEventListener("click",async()=>{F=a+1,S(K),await Y(!1,!0),S(Ke)})}),Ze.forEach((e,a)=>{e.addEventListener("click",()=>{p=a,S(0),ne()})});function ne(){U[p].position.copy(l.translation());let e=3;ie=!0;let a=setInterval(i=>{Se.classList.remove("hidden_block"),e++,e==4?(ie=!1,xe.textContent="GO",A=!0,ae.classList.remove("hidden_block"),clearInterval(a),setTimeout(()=>{Se.classList.add("hidden_block")},600)):xe.textContent=4-e},1e3)}Xe.addEventListener("click",()=>{ce=ye(),ce&&document.body.requestFullscreen().then(()=>{screen.orientation.lock("landscape")}),De.classList.add("hidden_block"),Ge.classList.remove("hidden_block")});function S(e){Ve.forEach(a=>{a.classList.add("hidden_block")}),e!=0&&e.classList.remove("hidden_block")}$e.addEventListener("click",async()=>{S(K),await Q(),await Y(!0,!0),S(0),ne()}),nt.addEventListener("click",async()=>{await Q(),await Y(!0,!0),S(0),ne()}),et.addEventListener("click",async()=>{S(K),await Q(),await ue()}),it.addEventListener("click",async()=>{S(K),await Q(),await ue()}),ae.addEventListener("click",()=>{ie==!1&&A&&!B&&(S(ot),t.userData.time=w.getElapsedTime(),w.stop(),O=!0)}),at.addEventListener("click",()=>{S(0),w.start(),w.elapsedTime=t.userData.time,O=!1}),tt.onchange=function(){this.checked?(b.shadowMap.enabled=!0,d.traverse(e=>{e.material&&(e.material.needsUpdate=!0)})):(b.shadowMap.enabled=!1,d.traverse(e=>{e.material&&(e.material.needsUpdate=!0)}))};let u;performance.now();let st=[],F=0,O=!1,t,l,be,ie=!1,U=[],p=0,k,oe,j=[],se,B;const f=[{hSpeed:10,maxHSpeed:.08,stepSpeed:1,maxSpeed:26,resetHAngle:!1},{hSpeed:14,maxHSpeed:.12,stepSpeed:10,maxSpeed:180,resetHAngle:!1},{hSpeed:14,maxHSpeed:.12,stepSpeed:3,maxSpeed:30,resetHAngle:!0}];let ve,h=[],E=new D,re=new $,A=!1,le=!1,q,ze,_e,g,H,I,J,W,Ce,N=[],de=[],z,ce=ye(),rt=new Z,w=new Z,V=0,Re=1/60,T=0,_=0,C;const Le=new $,lt=new D(0,-1,0),d=new ke;d.background=new Ae(14479094),d.fog=new qe(d.background,1,300);const G=new Te(16777215,16777215,2);G.color.setHSL(.6,1,.6),G.groundColor.setHSL(.095,1,.75),G.position.set(0,100,0),new Me(G,10);const x=new Fe(16777215,3);x.position.set(1,2,.2),x.position.multiplyScalar(120),x.castShadow=!0,x.shadow.mapSize.width=2048,x.shadow.mapSize.height=2048;const X=1e3;x.shadow.camera.left=-X,x.shadow.camera.right=X,x.shadow.camera.top=X,x.shadow.camera.bottom=-X,x.shadow.camera.far=3500,x.shadow.bias=-.001,new Oe(x,10),new He(11184810,1);const y=new Ie(75,document.body.offsetWidth/document.body.offsetHeight,.1,1e3);y.position.set(0,4,-10);let Be=new Je;document.body.appendChild(Be.dom);const b=new We;b.setSize(document.body.offsetWidth,document.body.offsetHeight),document.body.appendChild(b.domElement),b.shadowMap.enabled=!0,b.shadowMap.type=Ne,window.addEventListener("resize",dt,!1);function dt(){y.aspect=document.body.offsetWidth/document.body.offsetHeight,y.updateProjectionMatrix(),b.setSize(document.body.offsetWidth,document.body.offsetHeight)}async function ct(){localStorage.getItem("playerData")?C=JSON.parse(localStorage.getItem("playerData")):(C={levelsTimes:{}},localStorage.setItem("playerData",JSON.stringify(C))),JSON.stringify(C),Qe.forEach((e,a,i)=>{C.levelsTimes["time"+(a+1)]!=null?e.childNodes[1].textContent=C.levelsTimes["time"+(a+1)]:e.childNodes[1].textContent=0})}async function ut(){w=new Z,d.add(x),d.add(G),_=0,await c.init(),u=new c.World(new c.Vector3(0,-9.81,0));let e=new je(y,b.domElement);e.enableDamping=!0,e.target.set(0,0,0),await new pe().loadAsync("models/map-menu.glb",onprogress=m=>{P.textContent=Math.round(m.loaded/m.total*100)+"%"}).then(m=>{const L=m.scene;P.textContent="0",L.traverse(r=>{if(r.name=="player")t=r.clone(),t.userData.vertices=t.geometry.attributes.position.array,t.userData.indices=t.geometry.index.array,t.castShadow=!0,t.receiveShadow=!0,t.material.transparent=!0,t.material.opacity=0,t.userData.mass=1,t.userData.playerBraking=!1,t.userData.hTransition=0,t.userData.currentSpeed=0,t.userData.boom=!1,t.userData.onStartArea=!0,t.userData.canBoostStep=!0,t.userData.time=0,t.userData.right=!1,t.userData.left=!1,t.userData.onGround=!1,t.userData.flying=!1,t.userData.origPosition=t.position,R(t),d.add(t);else if(r.name.includes("player-tube"))k=r.clone(),k.userData.startPosition=new D(k.position.x,k.position.y,k.position.z),U[r.name.slice(-1)-1]=k,d.add(k);else if(r.name=="arrow_area")z=r.clone(),z.userData.hPos=0,d.add(z);else if(r.name.includes("ground"))new M().setFromObject(r).getSize(new D),q=r.clone(),q.receiveShadow=!0,q.userData.mass=0,R(q),N.push(q),d.add(q),r.name=="left_ground_wall"?ze=r.position:r.name=="right_ground_wall"&&(_e=r.position);else if(r.name.includes("wall")){new M().setFromObject(r).getSize(new D);let v=r.clone();v.castShadow=!0,v.receiveShadow=!0,v.userData.mass=1,R(v),N.push(v),d.add(v)}else if(r.name.includes("area")){let v=r.clone();v.castShadow=!0,d.add(v)}else r.name.includes("start_flag")?(oe=r.clone(),d.add(oe)):r.name.includes("itsmen_body")?(g=r.clone(),d.add(g),R(g)):r.name.includes("itsmen_left_hand")?(H=r.clone(),d.add(H),R(H)):r.name.includes("itsmen_right_hand")?(I=r.clone(),d.add(I),R(I)):r.name.includes("itsmen_left_leg")?(J=r.clone(),d.add(J),R(J)):r.name.includes("itsmen_right_leg")&&(W=r.clone(),d.add(W),R(W))})}),d.traverse(function(m){m.material&&(m.material.needsUpdate=!0)}),await ct();let a=c.JointData.spherical({x:.3,y:.4,z:0},{x:0,y:-.4,z:0});u.createImpulseJoint(a,g.userData.body,H.userData.body,!0);let i=c.JointData.spherical({x:-.3,y:.4,z:0},{x:0,y:-.4,z:0});u.createImpulseJoint(i,g.userData.body,I.userData.body,!0);let s=c.JointData.spherical({x:.2,y:-.6,z:0},{x:0,y:-.4,z:0});u.createImpulseJoint(s,g.userData.body,J.userData.body,!0);let n=c.JointData.spherical({x:-.2,y:-.6,z:0},{x:0,y:-.4,z:0});u.createImpulseJoint(n,g.userData.body,W.userData.body,!0);let o=c.JointData.spherical({x:0,y:0,z:0},{x:0,y:.4,z:0});Ce=u.createImpulseJoint(o,g.userData.body,l,!0),le=!0}async function mt(){B=!1;const e=new pe,a="models/map"+F+".glb";await e.loadAsync(a,onprogress=i=>{P.textContent=Math.round(i.loaded/i.total*100)+"%"}).then(i=>{const s=i.scene;P.textContent="0",s.traverse(n=>{if(n.name.includes("ground")){new M().setFromObject(n).getSize(new D);let o=n.clone();o.receiveShadow=!0,o.userData.mass=0,o.name=n.name,R(o),N.push(o),d.add(o)}else if(n.name.includes("wall")){new M().setFromObject(n).getSize(new D);let o=n.clone();o.userData.mass=1,R(o),N.push(o),d.add(o)}else if(n.name.includes("moving_block")){const o=new M().setFromObject(n).getSize(new D);let m=n.clone();m.userData.size=o,m.userData.mass=1,m.userData.raycaster=new $,m.userData.speed=-n.name.substr(n.name.indexOf("speed")+6),m.userData.direction=new D(m.userData.speed,0,0),he.push(m),R(m),d.add(m)}else if(n.name.includes("area")){let o=n.clone();o.castShadow=!0,o.receiveShadow=!0,d.add(o),n.name.includes("star_area")&&j.push(o)}else n.name.includes("finish_block")&&(se=n.clone(),d.add(se))})}),fe.textContent=C.levelsTimes["time"+F]}async function ue(){await Y(!0,!1),S(De)}ue();async function Y(e,a){e&&await ut(),a&&await mt()}async function Q(){for(A=!1,le=!1,_=0,t.userData.time=0,t.userData.boom=!1,ae.classList.add("hidden_block"),w.start(),w.elapsedTime=t.userData.time,O=!1,t.userData.currentSpeed=0,we.textContent=t.userData.currentSpeed,_=0,te.textContent=_;d.children.length>0;){let e=d.children[0];e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(a=>a.dispose()):e.material.dispose()),d.remove(e)}B=!1}function pt(){if(performance.now(),le&&!B&&(ce?t.userData.boom?y.lookAt(g.position):(y.lookAt(new D(y.position.x,t.position.y,t.position.z+5)),y.position.y=t.position.y+5,y.position.z=t.position.z-3):t.userData.boom?k.position.y>0&&y.lookAt(g.position):(y.lookAt(new D(y.position.x,t.position.y,t.position.z+5)),y.position.y=t.position.y+4,y.position.z=t.position.z-4),z.position.set(t.position.x,t.position.y,t.position.z+5)),A){B?S(Pe):(_=w.getElapsedTime().toFixed(3),te.textContent=_,Dt(),yt(),j.forEach((a,i,s)=>{a.rotation.z+=.05}),ee(t,j)&&(console.log(ee(t,j)),d.remove(ee(t,j)))),t.position.x>ze.x-t.userData.size.x/1.3&&(z.position.x=t.position.x,t.userData.hTransition=-.4),t.position.x<_e.x+t.userData.size.x/1.3&&(z.position.x=t.position.x,t.userData.hTransition=.4);let e=new c.EventQueue(!0);u.step(e),U[p].position.copy(l.translation()),U[p].quaternion.copy(l.rotation());for(let a=0,i=h.length;a<i;a++)h[a][0].position.copy(h[a][1].translation()),h[a][0].quaternion.copy(h[a][1].rotation());e.drainCollisionEvents((a,i,s)=>{de.forEach((n,o)=>{l.handle==a&&n.handle==i&&l.linvel().z<15&&t.userData.boom==!1&&(u.removeImpulseJoint(Ce),g.userData.body.applyImpulse({x:0,y:4,z:10},!0),g.userData.body.setEnabledRotations(!0),be.setFriction(20),t.userData.boom=!0)})})}Be.update()}b.setAnimationLoop(()=>{V+=rt.getDelta(),V>Re&&!O&&(pt(),b.render(d,y),V=V%Re)}),document.addEventListener("touchend",gt),document.addEventListener("touchstart",Ee),document.addEventListener("touchmove",Ee),window.addEventListener("keydown",ft),window.addEventListener("keyup",wt),document.addEventListener("mousedown",ht,!1);function yt(){he.forEach((e,a)=>{let i=e,s=ge[a];s.setLinvel(i.userData.direction,!0),s.setAngvel({x:i.userData.direction.z,y:i.userData.direction.y,z:-i.userData.direction.x},!0);const n=i.userData.direction;i.userData.raycaster.set(new D(i.position.x,.4,i.position.z),n.clone().normalize());const o=i.userData.raycaster.intersectObjects(N);o.length>0&&o[0].distance<i.userData.size.x/2&&(i.userData.direction.x=i.userData.direction.x*-1)})}function Dt(){t.position.z>se.position.z&&(_=w.getElapsedTime().toFixed(3),te.textContent=_,B=!0,Ue.textContent=_,C.levelsTimes["time"+F]!=null?T=C.levelsTimes["time"+F]:T=0,(_<T||T==0)&&(T=_,fe.textContent=T,C.levelsTimes["time"+F]=T,localStorage.setItem("playerData",JSON.stringify(C))),t.position.z=0),z.position.x+=t.userData.hTransition;const e=new D().subVectors(l.translation(),z.position).normalize();z.lookAt(t.position.x,t.position.y,t.position.z),l.setRotation({w:z.quaternion.w,x:l.rotation().x,y:z.quaternion.y,z:l.rotation().z}),l.setLinvel({x:e.x*-f[p].hSpeed,y:l.linvel().y,z:l.linvel().z}),Le.set(t.position,lt);const a=Le.intersectObjects(N);if(a.length>0&&(a[0].distance<.4?(t.userData.flying=!1,!t.userData.onGround&&t.userData.flying,t.userData.onGround=!0):(t.userData.onGround=!1,t.userData.flying=!0)),l.linvel().z>0?t.userData.currentSpeed=l.linvel().z.toFixed(0):t.userData.currentSpeed=0,we.textContent=t.userData.currentSpeed,t.userData.left&&t.userData.onGround){t.userData.hTransition<5&&(t.userData.hTransition+=f[p].maxHSpeed);let i=l.linvel();i.z*=.9996,l.setLinvel(i,!0)}if(t.userData.right&&t.userData.onGround){t.userData.hTransition>-5&&(t.userData.hTransition-=f[p].maxHSpeed);let i=l.linvel();i.z*=.9996,l.setLinvel(i,!0)}f[p].resetHAngle&&!t.userData.left&&!t.userData.right&&(t.userData.hTransition<-f[p].maxHSpeed?t.userData.hTransition+=f[p].maxHSpeed:t.userData.hTransition>f[p].maxHSpeed?t.userData.hTransition-=f[p].maxHSpeed:t.userData.hTransition=0),t.position.z>oe.position.z?t.userData.onStartArea=!1:t.userData.onStartArea=!0}function Ee(e){if(t.userData.onGround){e=e.changedTouches[0];var a=b.domElement.getBoundingClientRect();E.x=(e.clientX-a.left)/a.width*2-1,E.y=-((e.clientY-a.top)/a.height)*2+1,re.setFromCamera(E,y),E.y>0&&t.userData.canBoostStep&&A&&t.userData.onStartArea&&l.linvel().z<f[p].maxSpeed&&l.linvel().y<5&&l.linvel().y>-5&&!B&&l.applyImpulse({x:0,y:0,z:f[p].stepSpeed},!0),t.userData.canBoostStep=!1,E.y<0&&(E.x>0?(t.userData.left=!1,t.userData.right=!0):(t.userData.right=!1,t.userData.left=!0))}}function ht(e){e.preventDefault();var a=b.domElement.getBoundingClientRect();E.x=(e.clientX-a.left)/a.width*2-1,E.y=-((e.clientY-a.top)/a.height)*2+1,re.setFromCamera(E,y),st.forEach(i=>{i.geometry.computeBoundingBox();var s=i.geometry.boundingBox.clone();s.applyMatrix4(i.matrixWorld),re.ray.intersectBox(s,new D)})}function gt(e){t.userData.right=!1,t.userData.left=!1,t.userData.canBoostStep=!0}function ft(e){switch(e.code){case"KeyW":case"ArrowUp":t.userData.canBoostStep&&A&&t.userData.onStartArea&&l.linvel().z<f[p].maxSpeed&&l.linvel().y<5&&l.linvel().y>-5&&!B&&l.applyImpulse({x:0,y:0,z:f[p].stepSpeed},!0),t.userData.canBoostStep=!1;break;case"KeyS":case"ArrowDown":l.applyImpulse({x:0,y:0,z:-f[p].stepSpeed/2},!0),t.userData.playerBraking=!0;break;case"KeyA":case"ArrowLeft":t.userData.left=!0;break;case"KeyD":case"ArrowRight":t.userData.right=!0;break}}function wt(e){switch(e.code){case"KeyW":case"ArrowUp":t.userData.canBoostStep=!0;break;case"KeyS":case"ArrowDown":l.linvel().y<.1&&(t.userData.playerBraking=!1);break;case"KeyA":case"ArrowLeft":t.userData.left=!1;break;case"KeyD":case"ArrowRight":t.userData.right=!1;break}}function R(e){let a,i;const s=e.rotation.clone();e.rotation.set(0,0,0);const n=new M().setFromObject(e).getSize(new D);if(e.rotation.copy(s),e.name.includes("player")?(t.userData.size=n,t.userData.orgRotation=s,a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0,!1,!1).setLinearDamping(0).setAngularDamping(2)),i=c.ColliderDesc.cuboid(n.x/5,n.y/1.5,n.z/3).setMass(e.userData.mass).setRestitution(0).setFriction(0),l=a,be=i,i.setActiveEvents(c.ActiveEvents.COLLISION_EVENTS),u.createCollider(i,a),t.userData.handle=l.handle,h.push([e,a,e.id])):e.name.includes("ground")&&(a=u.createRigidBody(c.RigidBodyDesc.fixed().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0)),i=c.ColliderDesc.cuboid(n.x/2,n.y/2,n.z/2).setMass(e.userData.mass).setRestitution(0).setFriction(0),u.createCollider(i,a),ve=a,q.userData.handle=ve.handle,h.push([e,a,e.id])),e.name.includes("wall")){a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0,!0,!1).setLinearDamping(0)),i=c.ColliderDesc.cuboid(n.x/2,n.y/2,n.z/2).setMass(e.userData.mass*10).setRestitution(0).setFriction(40);let o=u.createCollider(i,a);de.push(o),h.push([e,a,e.id])}if(e.name.includes("moving_block")){a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0,!0,!0,!0).setLinearDamping(0)),i=c.ColliderDesc.ball(n.x/2).setMass(e.userData.mass*10).setRestitution(0).setFriction(20);let o=a;ge.push(o);let m=u.createCollider(i,a);de.push(m),h.push([e,a,e.id])}e.name.includes("itsmen_body")&&(a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0,!1,!0).setLinearDamping(0).setAngularDamping(0)),i=c.ColliderDesc.cuboid(n.x/2,n.y/2,n.z/2).setMass(0).setRestitution(0).setFriction(0).setDensity(2),g.userData.body=a,g.userData.collider=i,u.createCollider(i,a),h.push([e,a,e.id])),e.name.includes("itsmen_left_hand")&&(a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!1,!0,!1).setLinearDamping(0).setAngularDamping(0)),i=c.ColliderDesc.capsule(n.z/2,n.x/10).setMass(0).setRestitution(0).setFriction(0).setDensity(2),H.userData.body=a,H.userData.collider=i,u.createCollider(i,a),h.push([e,a,e.id])),e.name.includes("itsmen_right_hand")&&(a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!1,!0,!1).setLinearDamping(0).setAngularDamping(0)),i=c.ColliderDesc.capsule(n.z/2,n.x/10).setMass(0).setRestitution(0).setFriction(0).setDensity(2),I.userData.body=a,I.userData.collider=i,u.createCollider(i,a),h.push([e,a,e.id])),e.name.includes("itsmen_left_leg")&&(a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!1,!0,!1).setLinearDamping(0).setAngularDamping(0)),i=c.ColliderDesc.capsule(n.z/2,n.x/10).setMass(0).setRestitution(0).setFriction(0).setDensity(2),J.userData.body=a,J.userData.collider=i,u.createCollider(i,a),h.push([e,a,e.id])),e.name.includes("itsmen_right_leg")&&(a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!1,!0,!1).setLinearDamping(0).setAngularDamping(0)),i=c.ColliderDesc.capsule(n.z/2,n.x/10).setMass(0).setRestitution(0).setFriction(0).setDensity(2),W.userData.body=a,W.userData.collider=i,u.createCollider(i,a),h.push([e,a,e.id]))}document.addEventListener("visibilitychange",function(){document.visibilityState==="visible"?!B&&A&&O==!1&&(w.start(),w.elapsedTime=t.userData.time):O==!1&&!B&&A&&(t.userData.time=w.getElapsedTime(),w.stop())});
