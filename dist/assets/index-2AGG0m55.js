import{C as be,S as nt,a as ot,F as at,H as st,b as it,D as rt,c as lt,A as ct,P as dt,W as ut,G as Me,V as q,B as U,R as De,d as pt,e as mt,f as ie}from"./three-Dhj7f3wh.js";import{O as m}from"./@dimforge-D3Mqfikn.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function Ie(){let e=window.matchMedia||window.msMatchMedia;return e?e("(pointer:coarse)").matches:!1}function O(e){const t=e/1e3,o=Math.floor(t),r=Math.floor((t-o)*1e3),a=Math.floor(o/60),s=o%60;return`${String(a).padStart(2,"0")}:${String(s).padStart(2,"0")}.${String(r).padStart(3,"0")}`}let N=document.querySelector(".main_load"),He=document.querySelector(".main_menu"),Be=document.querySelector(".select_level"),fe=document.querySelectorAll(".select_level .level_shadow"),yt=document.querySelector(".select_tube"),ht=document.querySelector(".finish_window"),_t=document.querySelector(".finish_you_time .finish_you_time_time"),Pe=document.querySelector(".boom_window"),re=document.querySelector(".main_record"),St=document.querySelectorAll("body>.overlay"),gt=document.querySelector(".startButton"),bt=document.querySelectorAll(".load_level_wrap .btn_lev"),Oe=document.querySelectorAll(".load_level_wrap .level_time"),Fe=document.querySelectorAll(".load_tubes_wrap>div"),le=document.querySelectorAll(".language_block>img"),Ge=[],Je=[],Ne=document.querySelector(".times"),we=document.querySelector(".current_time"),je=document.querySelector(".best_time"),Dt=document.querySelector(".finish_window .finish_again"),ft=document.querySelector(".finish_window .finish_in_menu"),wt=document.querySelector(".boom_window .finish_again"),xt=document.querySelector(".boom_window .finish_in_menu"),We=document.querySelector(".speed_block"),Ve=document.querySelector(".speed_block>.speed"),qt=document.querySelector(".instr_check"),ce=document.querySelector(".load_percent");document.querySelector(".records_wrap>div");let xe=document.querySelector(".pause_button_wrap"),vt=document.querySelector(".close_pause_button"),Lt=document.querySelector(".reset_button"),Ct=document.querySelector(".inmenu_button"),kt=document.querySelector(".before_start"),At=document.querySelector(".instruction_start_btn"),zt=document.querySelector(".menu_in_game_wrap"),Ke=document.querySelector(".start_time"),Ue=document.querySelector(".start_time_wrap"),qe=document.querySelector(".audio_button");le.forEach((e,t)=>{e.addEventListener("click",()=>{u.language!=t&&(le.forEach(o=>{o.classList.remove("selected")}),e.classList.add("selected"),u.language=t,localStorage.setItem("playerData",JSON.stringify(u)),Ye(u.language))})});function Ye(e){e==0?(document.querySelector(".title_game").src="./images/title.png",document.querySelector(".startgame_title").textContent="\u043D\u0430\u0447\u0430\u0442\u044C \u0438\u0433\u0440\u0443",document.querySelector(".language_title").textContent="\u042F\u0437\u044B\u043A:",document.querySelectorAll(".level_text h2>span").forEach(t=>{t.textContent="\u0423\u0440\u043E\u0432\u0435\u043D\u044C"}),document.querySelectorAll(".leveltime_title").forEach(t=>{t.textContent="\u0412\u0440\u0435\u043C\u044F: "}),document.querySelectorAll(".load_tubes_wrap .selecttube_title").forEach(t=>{t.textContent="\u0422\u044E\u0431\u0438\u043D\u0433"}),document.querySelectorAll(".load_tubes_wrap .selecttubespeed_title").forEach(t=>{t.textContent="\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C: "}),document.querySelectorAll(".load_tubes_wrap .selecttubecontrol_title").forEach(t=>{t.textContent="\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435: "}),document.querySelectorAll(".load_level_wrap .btn_lev").forEach(t=>{t.textContent="\u041D\u0430\u0447\u0430\u0442\u044C"}),document.querySelectorAll(".load_level_wrap .ad_res").forEach(t=>{t.textContent="\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u044C"}),document.querySelector(".selecttubedesc_title").textContent="\u041F\u0440\u043E\u0445\u043E\u0434\u0438\u0442\u0435 \u0443\u0440\u043E\u0432\u043D\u0438, \u0447\u0442\u043E\u0431\u044B \u0440\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0442\u044E\u0431\u0438\u043D\u0433\u0438",document.querySelector(".menu_in_game_wrap_head").textContent="\u041F\u0430\u0443\u0437\u0430",document.querySelector(".close_pause_button").textContent="\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0438\u0433\u0440\u0443",document.querySelector(".reset_button").textContent="\u041D\u0430\u0447\u0430\u0442\u044C \u0437\u0430\u043D\u043E\u0432\u043E",document.querySelector(".inmenu_button").textContent="\u0412\u044B\u0439\u0442\u0438",document.querySelector(".finish_you_time_title").textContent="\u0412\u0430\u0448\u0435 \u0432\u0440\u0435\u043C\u044F: ",document.querySelector(".crash_title").textContent="\u0412\u044B \u0432\u0440\u0435\u0437\u0430\u043B\u0438\u0441\u044C",document.querySelector(".finish_title").textContent="\u0412\u044B \u043F\u0440\u0438\u0435\u0445\u0430\u043B\u0438",document.querySelectorAll(".finish_again").forEach(t=>{t.textContent="\u0415\u0449\u0435 \u0440\u0430\u0437"}),document.querySelectorAll(".finish_in_menu").forEach(t=>{t.textContent="\u0412\u044B\u0431\u043E\u0440 \u0443\u0440\u043E\u0432\u043D\u044F"}),document.querySelector(".current_time_title").textContent="\u0412\u0440\u0435\u043C\u044F",document.querySelector(".best_time_title").textContent="\u041B\u0443\u0447\u0448\u0435\u0435 \u0432\u0440\u0435\u043C\u044F",document.querySelector(".speed_title").textContent="\u041A\u041C/\u0427",document.querySelector(".instruction_start_btn").textContent="\u0421\u0422\u0410\u0420\u0422",document.querySelector(".instr-disabled span").textContent="\u0411\u043E\u043B\u044C\u0448\u0435 \u043D\u0435 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C",document.querySelector(".desktop_instr").innerHTML=`<h2>\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435</h2>
    <span>\u0411\u044B\u0441\u0442\u0440\u043E \u043D\u0430\u0436\u0438\u043C\u0430\u0439\u0442\u0435 <span class='button_active'>W</span> \u0438\u043B\u0438 <span class='button_active'>\u2191</span> \u0447\u0442\u043E\u0431\u044B \u0440\u0430\u0437\u043E\u0433\u043D\u0430\u0442\u044C\u0441\u044F \u0434\u043E \u0441\u0442\u0430\u0440\u0442\u043E\u0432\u043E\u0439 \u043E\u0442\u043C\u0435\u0442\u043A\u0438</span>
    <span>\u041A\u043B\u0430\u0432\u0438\u0448\u0430\u043C\u0438 <span>\u2190</span> <span>\u2192</span> \u0438\u043B\u0438 <span>A</span> <span>D</span> \u0443\u043F\u0440\u0430\u0432\u043B\u044F\u0439\u0442\u0435 \u0442\u044E\u0431\u0438\u043D\u0433\u043E\u043C</span>
    <span>\u0426\u0435\u043B\u044C - \u0434\u043E\u0435\u0445\u0430\u0442\u044C \u0434\u043E \u0444\u0438\u043D\u0438\u0448\u0430 \u0437\u0430 \u043A\u0440\u0430\u0442\u0447\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043C\u044F</span>`,document.querySelector(".mobile_instr div").innerHTML=`<span>\u0411\u044B\u0441\u0442\u0440\u043E \u043D\u0430\u0436\u0438\u043C\u0430\u0439\u0442\u0435 \u043D\u0430 \u0437\u043E\u043D\u0443 <span> \u2191 </span> \u0447\u0442\u043E\u0431\u044B \u0440\u0430\u0437\u043E\u0433\u043D\u0430\u0442\u044C\u0441\u044F \u0434\u043E \u0441\u0442\u0430\u0440\u0442\u043E\u0432\u043E\u0439 \u043E\u0442\u043C\u0435\u0442\u043A\u0438</span>
    <span>\u041D\u0430\u0436\u0438\u043C\u0430\u044F \u043D\u0430 \u0437\u043E\u043D\u044B <span> \u2190 </span> \u0438 <span> \u2192 </span> \u0443\u043F\u0440\u0430\u0432\u043B\u044F\u0439\u0442\u0435 \u0442\u044E\u0431\u0438\u043D\u0433\u043E\u043C</span>`,document.querySelector(".sci-fi-loader strong").textContent="\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430",document.querySelector(".main_record_title").textContent="\u041C\u043E\u0435 \u043E\u0431\u0449\u0435\u0435 \u0432\u0440\u0435\u043C\u044F: ",(k=0)&&(document.querySelector(".main_record").textContent="\u041F\u0440\u043E\u0439\u0434\u0438\u0442\u0435 \u0432\u0441\u0435 \u0443\u0440\u043E\u0432\u043D\u0438, \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0440\u0435\u043A\u043E\u0440\u0434"),document.querySelector(".records_wrap>p").textContent="\u041C\u0438\u0440\u043E\u0432\u043E\u0439 \u0440\u0435\u0439\u0442\u0438\u043D\u0433: ",document.querySelector(".need_auth_text").textContent="\u0427\u0442\u043E\u0431\u044B \u0443\u0447\u0430\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0432 \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0435  ",document.querySelector(".auth_link").textContent="\u0432\u043E\u0439\u0434\u0438\u0442\u0435 \u0432 \u042F\u043D\u0434\u0435\u043A\u0441 \u0430\u043A\u043A\u0430\u0443\u043D\u0442"):(document.querySelector(".title_game").src="./images/title-en.png",document.querySelector(".startgame_title").textContent="start game",document.querySelector(".language_title").textContent="Language:",document.querySelectorAll(".level_text h2>span").forEach(t=>{t.textContent="Level"}),document.querySelectorAll(".leveltime_title").forEach(t=>{t.textContent="Time: "}),document.querySelectorAll(".load_tubes_wrap .selecttube_title").forEach(t=>{t.textContent="Tubing"}),document.querySelectorAll(".load_tubes_wrap .selecttubespeed_title").forEach(t=>{t.textContent="Speed: "}),document.querySelectorAll(".load_tubes_wrap .selecttubecontrol_title").forEach(t=>{t.textContent="Control: "}),document.querySelector(".selecttubedesc_title").textContent="Complete the levels to unlock the tubings",document.querySelector(".menu_in_game_wrap_head").textContent="Pause",document.querySelector(".close_pause_button").textContent="Continue",document.querySelector(".reset_button").textContent="Start again",document.querySelector(".inmenu_button").textContent="Exit to levels",document.querySelector(".finish_you_time_title").textContent="You time: ",document.querySelector(".crash_title").textContent="You crashed",document.querySelector(".finish_title").textContent="You finished",document.querySelectorAll(".finish_again").forEach(t=>{t.textContent="Again"}),document.querySelectorAll(".finish_in_menu").forEach(t=>{t.textContent="Select Level"}),document.querySelector(".current_time_title").textContent="Time",document.querySelector(".best_time_title").textContent="Best time",document.querySelector(".speed_title").textContent="KM/H",document.querySelector(".instruction_start_btn").textContent="START",document.querySelector(".instr-disabled span").textContent="Don't show again",document.querySelector(".desktop_instr").innerHTML=`<h2>Instructions</h2>
    <span>Quickly press <span class='button_active'>W</span> or <span class='button_active'>\u2191</span> to accelerate to the starting point</span>
    <span>Use <span>\u2190</span> <span>\u2192</span> or <span>A</span> <span>D</span> keys to control the tubing</span>
    <span>The goal is to reach the finish line in the shortest time</span>`,document.querySelector(".mobile_instr div").innerHTML=`<span>Quickly press on zone <span> \u2191 </span> to accelerate to the starting point</span>
    <span>By taps on zones <span> \u2190 </span> and <span> \u2192 </span> control the tubing</span>`,document.querySelector(".sci-fi-loader strong").textContent="Loading ",document.querySelector(".main_record_title").textContent="My total time: ",(k=0)&&(document.querySelector(".main_record").textContent="Complete all the levels to set a record"),document.querySelector(".records_wrap>p").textContent="World Ranking: ",document.querySelector(".need_auth_text").textContent="To participate in the rating ",document.querySelector(".auth_link").textContent="login to Yandex account",document.querySelectorAll(".load_level_wrap .btn_lev").forEach(t=>{t.textContent="Start"}),document.querySelectorAll(".load_level_wrap .ad_res").forEach(t=>{t.textContent="Skip"}))}document.querySelectorAll(".load_level_wrap .ad_res").forEach((e,t)=>{e.addEventListener("click",async()=>{ysdk.adv.showRewardedVideo({callbacks:{onOpen:()=>{console.log("Video ad open."),l!=null&&l.isPlaying&&l.stop()},onRewarded:async()=>{console.log("Rewarded! "+t),g(N),u.levelsTimes["time"+(t+1)]=120.111,ne=Object.keys(u.levelsTimes).length,localStorage.setItem("playerData",JSON.stringify(u)),await K(),await ae()},onClose:()=>{console.log("Video ad closed."),l!=null&&!l.isPlaying&&x&&l.play()},onError:o=>{console.log("Error while open video ad:",o),l!=null&&!l.isPlaying&&x&&l.play()}}})})}),bt.forEach((e,t)=>{e.addEventListener("click",async()=>{t+1<=Re+1&&(j=t+1,Fe.forEach((o,r)=>{h[r].levels.includes(j)?(o.classList.remove("disabledTube"),h[r].canInLevel=!0):(o.classList.add("disabledTube"),h[r].canInLevel=!1)}),g(N),await se(!1,!0),g(yt))})}),Fe.forEach((e,t)=>{e.addEventListener("click",()=>{h[t].canInLevel&&(_=t,g(0),ee())})});function ee(){if(!u.canStart)g(kt),E?document.querySelector(".mobile_instr").classList.remove("hidden_instr"):document.querySelector(".desktop_instr").classList.remove("hidden_instr");else{Ne.classList.remove("hidden_block"),We.classList.remove("hidden_block"),ue[_].position.copy(c.translation());let e=0;Ce=!0,E&&document.querySelector(".instr-mobile-ingame").classList.remove("hidden_block"),E&&document.querySelector(".anim_tap_top").classList.remove("hidden_block");let t=setInterval(o=>{D!=null&&!D.isPlaying&&x&&!pe&&D.play(),Ue.classList.remove("hidden_block"),pe||e++,e==2&&E&&document.querySelector(".instr-mobile-ingame").classList.add("hidden_block"),e==4?(D==null||D.stop(2.5),Ce=!1,Ke.textContent="GO",I=!0,xe.classList.remove("hidden_block"),clearInterval(t),ysdk.features.GameplayAPI.start(),setTimeout(()=>{Ue.classList.add("hidden_block")},600)):Ke.textContent=4-e},1e3)}}At.addEventListener("click",()=>{u.canStart=!0,g(0),ee()}),qe.addEventListener("click",()=>{console.log(123),x==!0?(qe.classList.add("audio_off"),l!=null&&l.isPlaying&&l.stop(),d!=null&&d.isPlaying&&d.stop(),D!=null&&D.isPlaying&&D.stop(),x=!1):(qe.classList.remove("audio_off"),l!=null&&!l.isPlaying&&l.play(),c.linvel().z>3&&n.userData.onGround&&!F&&(d==null||d.play()),x=!0)}),gt.addEventListener("click",()=>{E=Ie(),document.querySelector(".audio_button_wrap").classList.remove("hidden_block"),l!=null&&x&&l.play(),E&&document.body.requestFullscreen().then(()=>{screen.orientation.lock("landscape")}),He.classList.add("hidden_block"),Be.classList.remove("hidden_block")});function g(e){St.forEach(t=>{t.classList.add("hidden_block")}),e!=0&&e.classList.remove("hidden_block")}Dt.addEventListener("click",async()=>{g(N),await K(),await se(!0,!0),g(0),ee()}),wt.addEventListener("click",async()=>{g(N),await K(),await se(!0,!0),g(0),ee()}),Lt.addEventListener("click",async()=>{await K(),await se(!0,!0),g(0),ee()}),ft.addEventListener("click",async()=>{g(N),await K(),await ae(),ysdk.adv.showFullscreenAdv({callbacks:{onOpen:function(e){l!=null&&l.isPlaying&&l.stop()},onClose:function(e){l!=null&&!l.isPlaying&&x&&l.play()},onError:function(e){l!=null&&!l.isPlaying&&x&&l.play()}}})}),xt.addEventListener("click",async()=>{g(N),await K(),await ae()}),Ct.addEventListener("click",async()=>{g(N),await K(),await ae()}),xe.addEventListener("click",()=>{var e;Ce==!1&&I&&!z&&((e=ysdk.features.GameplayAPI)==null||e.stop(),g(zt),n.userData.time=A.getElapsedTime(),A.stop(),document.querySelector(".audio_button_wrap").classList.add("hidden_block"),d==null||d.stop(),l==null||l.stop(),F=!0)}),vt.addEventListener("click",()=>{var e;g(0),A.start(),A.elapsedTime=n.userData.time,document.querySelector(".audio_button_wrap").classList.remove("hidden_block"),x&&(l==null||l.play()),c.linvel().z>3&&n.userData.onGround&&x&&(d==null||d.play()),F=!1,(e=ysdk.features.GameplayAPI)==null||e.start()}),qt.onchange=function(){this.checked?(u.canStart=!0,localStorage.setItem("playerData",JSON.stringify(u))):(u.canStart=!1,localStorage.setItem("playerData",JSON.stringify(u)))};let y,ve=!0;performance.now();let j=0,F=!1,x=!0,k=0,te=0,ne=0,de,Y=!1,n,c,Le,Ce=!1,ue=[],_=0,G,ke,pe=!1,Ae,z;const h=[{hSpeed:10,maxHSpeed:.08,stepSpeed:1,nowSpeed:0,maxSpeed:26,resetHAngle:!1,levels:[1,2,3,4,5,6,7,8,9],canInLevel:!1},{hSpeed:12,maxHSpeed:.1,stepSpeed:2,nowSpeed:0,maxSpeed:38,resetHAngle:!1,levels:[4,5,6,7,8,9],canInLevel:!1},{hSpeed:14,maxHSpeed:.12,stepSpeed:2,nowSpeed:0,maxSpeed:44,resetHAngle:!0,levels:[7,8,9],canInLevel:!1}];let d,l,T,D,$e,v=[],$=new q,Et=new De,I=!1,ze=!1,Q,Qe,Xe,b,H,B,L,C,me,ye,he,X,Z,Ee,W=[],_e=[],Te=[],f,E=Ie(),Tt=new be,A=new be,Se=0,Ze=1/60,V=0,R=0,Re=2,u;const et=new De,Rt=new q(0,-1,0),p=new nt;p.background=new ot(14479094),p.fog=new at(p.background,1,300);const oe=new st(16777215,16777215,2);oe.color.setHSL(.6,1,.6),oe.groundColor.setHSL(.095,1,.75),oe.position.set(0,100,0),new it(oe,10);const ge=new rt(16777215,3);ge.position.set(1,2,.2),ge.position.multiplyScalar(120),new lt(ge,10),new ct(11184810,1);const w=new dt(85,document.body.offsetWidth/document.body.offsetHeight,.1,310);w.position.set(0,4,-10);const J=new ut({antialias:!1});J.setSize(document.body.offsetWidth,document.body.offsetHeight),document.body.appendChild(J.domElement),J.shadowMap.enabled=!1,window.addEventListener("resize",Mt,!1);function Mt(){E?(w.aspect=document.body.offsetWidth/document.body.offsetHeight,w.updateProjectionMatrix(),J.setSize(innerWidth,innerHeight)):(w.aspect=document.body.offsetWidth/document.body.offsetHeight,w.updateProjectionMatrix(),J.setSize(document.body.offsetWidth,document.body.offsetHeight))}async function It(){localStorage.getItem("playerData")?(u=JSON.parse(localStorage.getItem("playerData")),le.forEach(e=>{e.classList.remove("selected")}),le[u.language].classList.add("selected"),Ye(u.language),ne=Object.keys(u.levelsTimes).length,ne==fe.length&&(k=0,Object.values(u.levelsTimes).forEach(e=>{k+=parseFloat(e)}),re.textContent=O(Math.round(k*1e3)),re.classList.add("main_record_green"))):(u={levelsTimes:{},canStart:!1,language:0},localStorage.setItem("playerData",JSON.stringify(u))),JSON.stringify(u),Re=0,fe.forEach((e,t)=>{t<Object.keys(u.levelsTimes).length+1&&(Re++,e.classList.remove("level_disabled"))}),Oe.forEach((e,t,o)=>{u.levelsTimes["time"+(t+1)]!=null?(e.childNodes[2].textContent=u.levelsTimes["time"+(t+1)],document.querySelectorAll(".load_level_wrap .ad_res").forEach((r,a)=>{(t==a||a==Oe.length-1)&&r.classList.add("not_vis")})):e.childNodes[2].textContent="00.000"})}async function Ht(){A=new be,p.add(ge),p.add(oe),R=0,await m.init(),y=new m.World(new m.Vector3(0,-9.81,0)),await new Me().loadAsync("models/map-menu.glb",onprogress=s=>{console.log(`Loaded: ${s.loaded}, Total: ${s.total}`);let S=Math.min(Math.round(s.loaded/s.total*100),100);ce.textContent=S+"%"}).then(s=>{const S=s.scene;ce.textContent="0",S.traverse(i=>{if(i.name=="player")n=i.clone(),n.userData.vertices=n.geometry.attributes.position.array,n.userData.indices=n.geometry.index.array,n.material.transparent=!0,n.material.opacity=0,n.userData.mass=1,n.userData.playerBraking=!1,n.userData.hTransition=0,n.userData.currentSpeed=0,n.userData.boom=!1,n.userData.onStartArea=!0,n.userData.canBoostStep=!0,n.userData.time=0,n.userData.right=!1,n.userData.left=!1,n.userData.onGround=!1,n.userData.flying=!1,n.userData.origPosition=n.position,M(n),p.add(n);else if(i.name.includes("player-tube"))G=i.clone(),G.userData.startPosition=new q(G.position.x,G.position.y,G.position.z),ue[i.name.slice(-1)-1]=G,p.add(G);else if(i.name=="arrow_area")f=i.clone(),f.userData.hPos=0,p.add(f);else if(i.name.includes("ground"))new U().setFromObject(i).getSize(new q),Q=i.clone(),Q.userData.mass=0,M(Q),W.push(Q),p.add(Q),i.name=="left_ground_wall"?Qe=i.position:i.name=="right_ground_wall"&&(Xe=i.position);else if(i.name.includes("wall")){new U().setFromObject(i).getSize(new q);let P=i.clone();P.userData.mass=1,M(P),W.push(P),_e.push(P),p.add(P)}else if(i.name.includes("area")){let P=i.clone();p.add(P)}else i.name.includes("start_flag")?(ke=i.clone(),p.add(ke)):i.name.includes("itsmen_body")?(b=i.clone(),b.material.transparent=!0,b.material.opacity=0,p.add(b),M(b)):i.name.includes("itsmen_left_hand")?(H=i.clone(),H.material.transparent=!0,H.material.opacity=0,p.add(H),M(H)):i.name.includes("itsmen_right_hand")?(B=i.clone(),B.material.transparent=!0,B.material.opacity=0,p.add(B),M(B)):i.name.includes("itsmen_left_leg")?(L=i.clone(),L.material.transparent=!0,L.material.opacity=0,p.add(L),M(L)):i.name.includes("itsmen_right_leg")?(C=i.clone(),C.material.transparent=!0,C.material.opacity=0,p.add(C),M(C)):i.name.includes("qmen_body")?(me=i.clone(),p.add(me)):i.name.includes("qmen_left_hand")?(ye=i.clone(),p.add(ye)):i.name.includes("qmen_right_hand")?(he=i.clone(),p.add(he)):i.name.includes("qmen_left_leg")?(X=i.clone(),p.add(X)):i.name.includes("qmen_right_leg")&&(Z=i.clone(),p.add(Z))})}),p.traverse(function(s){s.material&&(s.material.needsUpdate=!0)}),await It();let e=m.JointData.spherical({x:.2,y:0,z:-.2},{x:-.4,y:0,z:0});y.createImpulseJoint(e,b.userData.body,H.userData.body,!0);let t=m.JointData.spherical({x:-.2,y:0,z:-.2},{x:.4,y:0,z:0});y.createImpulseJoint(t,b.userData.body,B.userData.body,!0);let o=m.JointData.spherical({x:.22,y:0,z:.5},{x:0,y:0,z:-.5});y.createImpulseJoint(o,b.userData.body,L.userData.body,!0);let r=m.JointData.spherical({x:-.22,y:0,z:.5},{x:0,y:0,z:-.5});y.createImpulseJoint(r,b.userData.body,C.userData.body,!0);let a=m.JointData.spherical({x:0,y:0,z:0},{x:0,y:.3,z:0});Ee=y.createImpulseJoint(a,b.userData.body,c,!0),ze=!0}async function Bt(){z=!1;const e=new Me,t="models/map"+j+".glb";await e.loadAsync(t,onprogress=o=>{let r=Math.min(Math.round(o.loaded/o.total*100),100);ce.textContent=r+"%"}).then(o=>{const r=o.scene;ce.textContent="0",r.traverse(a=>{if(a.name.includes("ground")){new U().setFromObject(a).getSize(new q);let s=a.clone();s.userData.mass=0,s.name=a.name,M(s),W.push(s),p.add(s)}else if(a.name.includes("wall")){new U().setFromObject(a).getSize(new q);let s=a.clone();s.userData.mass=1,M(s),W.push(s),_e.push(s),p.add(s)}else if(a.name.includes("moving_block")){const s=new U().setFromObject(a).getSize(new q);let S=a.clone();S.userData.size=s,S.userData.mass=1,S.userData.raycaster=new De,S.userData.speed=-a.name.substr(a.name.indexOf("speed")+6),S.userData.direction=new q(S.userData.speed,0,0),Ge.push(S),M(S),_e.push(S),p.add(S)}else if(a.name.includes("area")){let s=a.clone();p.add(s)}else a.name.includes("finish_block")&&(Ae=a.clone(),p.add(Ae))})}),je.textContent=u.levelsTimes["time"+j]}async function Pt(){const e=new pt;n.add(e);const t=new mt;await t.loadAsync("audio/slide.mp3").then(o=>{d=new ie(e),d.setBuffer(o),d.setLoop(!0),d.setRefDistance(40),d.setVolume(.7),n.add(d)}).catch(o=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0430\u0443\u0434\u0438\u043E:",o)}),await t.loadAsync("audio/around.mp3").then(o=>{l=new ie(e),l.setBuffer(o),l.setLoop(!0),l.setRefDistance(40),l.setVolume(1),l.error=!1,n.add(l)}).catch(o=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0430\u0443\u0434\u0438\u043E:",o)}),await t.loadAsync("audio/boom1.mp3").then(o=>{T=new ie(e),T.setBuffer(o),T.setLoop(!1),T.setRefDistance(40),T.setVolume(.9),T.error=!1,n.add(T)}).catch(o=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0430\u0443\u0434\u0438\u043E:",o)}),await t.loadAsync("audio/bip.mp3").then(o=>{D=new ie(e),D.setBuffer(o),D.setLoop(!1),D.setRefDistance(40),D.setVolume(.7),D.error=!1,n.add(D)}).catch(o=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0430\u0443\u0434\u0438\u043E:",o)})}document.querySelector(".auth_link").addEventListener("click",()=>{ysdk.auth.openAuthDialog().then(()=>{ysdk.isAvailableMethod("leaderboards.setLeaderboardScore").then(e=>{Y=e,ysdk.getLeaderboards().then(t=>{de=t,t.getLeaderboardEntries("main",{quantityTop:3,includeUser:Y,quantityAround:0}).then(o=>{console.log(o),document.querySelector(".records_wrap>div").innerHTML="",u.language==0?document.querySelector(".need_auth").textContent="\u0412\u044B \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043B\u0438\u0441\u044C! \u041C\u043E\u0436\u0435\u0442\u0435 \u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0440\u0435\u043A\u043E\u0440\u0434\u044B!":document.querySelector(".need_auth").textContent="You have logged in! You can set records!",document.querySelector(".need_auth").classList.add("green"),o.entries.forEach((r,a)=>{o.userRank==r.rank?(te=O(r.score),document.querySelector(".records_wrap>div").innerHTML=document.querySelector(".records_wrap>div").innerHTML+'<p class = "main_record_green">'+parseInt(r.rank)+". "+O(r.score)+"</p>"):document.querySelector(".records_wrap>div").innerHTML=document.querySelector(".records_wrap>div").innerHTML+"<p>"+parseInt(a+1)+". "+O(r.score)+"</p>"})})})}),initPlayer().catch(e=>{})}).catch(()=>{})});async function ae(){await se(!0,!1),ve?(g(He),YaGames.init().then(e=>{var t;(t=e.features.LoadingAPI)==null||t.ready(),e.isAvailableMethod("leaderboards.setLeaderboardScore").then(o=>{Y=o,Y&&document.querySelector(".need_auth").classList.add("hidden_block"),e.getLeaderboards().then(r=>{de=r,r.getLeaderboardEntries("main",{quantityTop:3,includeUser:Y,quantityAround:0}).then(a=>{console.log(a),a.entries.forEach((s,S)=>{a.userRank==s.rank?(te=s.score,document.querySelector(".records_wrap>div").innerHTML=document.querySelector(".records_wrap>div").innerHTML+'<p class = "main_record_green">'+parseInt(s.rank)+". "+O(s.score)+"</p>"):document.querySelector(".records_wrap>div").innerHTML=document.querySelector(".records_wrap>div").innerHTML+"<p>"+parseInt(S+1)+". "+O(s.score)+"</p>"})})})})}),ve=!1):g(Be)}ae();async function se(e,t){e&&await Ht(),t&&await Bt(),ve&&Pt()}async function K(){for(I=!1,ze=!1,R=0,n.userData.time=0,n.userData.boom=!1,h.forEach(e=>{e.nowSpeed=0}),W=[],_e=[],v=[],xe.classList.add("hidden_block"),Ne.classList.add("hidden_block"),We.classList.add("hidden_block"),document.querySelector(".audio_button_wrap").classList.remove("hidden_block"),A.start(),A.elapsedTime=n.userData.time,F=!1,n.userData.currentSpeed=0,Ve.textContent=n.userData.currentSpeed,R=0,we.textContent=R;p.children.length>0;){let e=p.children[0];e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(t=>t.dispose()):e.material.dispose()),p.remove(e)}z=!1}function Ot(){if(ze&&!z&&(d!=null&&x&&(c.linvel().z>3&&n.userData.onGround?d.isPlaying||d.play():d.isPlaying&&d.stop()),E?n.userData.boom?(w.lookAt(b.position),d==null||d.stop()):(w.lookAt(new q(w.position.x,n.position.y,n.position.z+5)),w.position.y=n.position.y+5,w.position.z=n.position.z-3):n.userData.boom?(G.position.y>0&&w.lookAt(b.position),d==null||d.stop()):(w.lookAt(new q(w.position.x,n.position.y,n.position.z+5)),w.position.y=n.position.y+4,w.position.z=n.position.z-4),f.position.set(n.position.x,n.position.y,n.position.z+5)),I){z?(g(ht),d==null||d.stop()):(R=A.getElapsedTime().toFixed(3),we.textContent=R,Gt(),Ft()),n.position.x>Qe.x-n.userData.size.x/1.3&&(f.position.x=n.position.x,n.userData.hTransition=-.4),n.position.x<Xe.x+n.userData.size.x/1.3&&(f.position.x=n.position.x,n.userData.hTransition=.4);let e=new m.EventQueue(!0);y.step(e),ue[_].position.copy(c.translation()),ue[_].quaternion.copy(c.rotation()),me.position.copy(b.position),me.rotation.copy(b.rotation),ye.position.copy(H.position),ye.rotation.copy(H.rotation),he.position.copy(B.position),he.rotation.copy(B.rotation),X.position.copy(L.position),X.rotation.copy(L.rotation),Z.position.copy(C.position),Z.rotation.copy(C.rotation);for(let t=0,o=v.length;t<o;t++)v[t][0].position.copy(v[t][1].translation()),v[t][0].quaternion.copy(v[t][1].rotation());e.drainCollisionEvents((t,o,r)=>{Te.forEach((a,s)=>{var S,i;c.handle==t&&a.handle==o&&!z?c.linvel().z<15&&n.userData.boom==!1&&(T!=null&&x&&T.play(),y.removeImpulseJoint(Ee),b.userData.body.applyImpulse({x:5,y:5,z:5},!0),b.userData.body.setEnabledRotations(!0),Le.setFriction(20),setTimeout(()=>{I=!1,g(Pe)},3e3),(S=ysdk.features.GameplayAPI)==null||S.stop(),n.userData.boom=!0):c.handle==t&&!z&&c.linvel().z<15&&n.position.y<5&&n.userData.boom==!1&&(T!=null&&x&&T.play(),y.removeImpulseJoint(Ee),b.userData.body.applyImpulse({x:5,y:5,z:5},!0),b.userData.body.setEnabledRotations(!0),Le.setFriction(20),(i=ysdk.features.GameplayAPI)==null||i.stop(),n.userData.boom=!0,setTimeout(()=>{I=!1,g(Pe)},3e3))})})}}J.setAnimationLoop(()=>{Se+=Tt.getDelta(),Se>Ze&&!F&&(Ot(),J.render(p,w),Se=Se%Ze)}),document.addEventListener("touchend",Jt),document.addEventListener("touchstart",tt),document.addEventListener("touchmove",tt),window.addEventListener("keydown",Nt),window.addEventListener("keyup",jt);function Ft(){Ge.forEach((e,t)=>{let o=e,r=Je[t];r.setLinvel(o.userData.direction,!0),r.setAngvel({x:o.userData.direction.z,y:o.userData.direction.y,z:-o.userData.direction.x},!0);const a=o.userData.direction;o.userData.raycaster.set(new q(o.position.x,.4,o.position.z),a.clone().normalize());const s=o.userData.raycaster.intersectObjects(W);s.length>0&&s[0].distance<o.userData.size.x/2&&(o.userData.direction.x=o.userData.direction.x*-1)})}function Gt(){var a;n.position.z>Ae.position.z&&!n.userData.boom&&(R=A.getElapsedTime().toFixed(3),we.textContent=R,z=!0,(a=ysdk.features.GameplayAPI)==null||a.stop(),_t.textContent=R,u.levelsTimes["time"+j]!=null?V=u.levelsTimes["time"+j]:V=0,(R<V||V==0)&&(V=R,je.textContent=V,u.levelsTimes["time"+j]=V,ne=Object.keys(u.levelsTimes).length,ne==fe.length&&(k=0,Object.values(u.levelsTimes).forEach(s=>{k+=parseFloat(s)}),re.textContent=O(Math.round(k*1e3)),re.classList.add("main_record_green"),console.log(te),console.log(Math.round(k*1e3)),Y&&Math.round(k*1e3)<te&&(console.log(Math.round(k*1e3)),de.setLeaderboardScore("main",Math.round(k*1e3)).then(()=>{console.log("setNewRec"),ysdk.getLeaderboards().then(s=>{de=s,s.getLeaderboardEntries("main",{quantityTop:3,includeUser:!0,quantityAround:0}).then(S=>{console.log(S),document.querySelector(".records_wrap>div").innerHTML="",S.entries.forEach((i,P)=>{S.userRank==i.rank?(te=i.score,document.querySelector(".records_wrap>div").innerHTML=document.querySelector(".records_wrap>div").innerHTML+'<p class = "main_record_green">'+parseInt(i.rank)+". "+O(i.score)+"</p>"):document.querySelector(".records_wrap>div").innerHTML=document.querySelector(".records_wrap>div").innerHTML+"<p>"+parseInt(P+1)+". "+O(i.score)+"</p>"})})})})),console.log("mainRecord "+k.toFixed(3))),localStorage.setItem("playerData",JSON.stringify(u))),n.position.z=0),f.position.x+=n.userData.hTransition;const e=new q().subVectors(c.translation(),f.position).normalize(),t=c.linvel(),o=new q(e.x*-h[_].hSpeed,t.y,e.z*-h[_].nowSpeed);c.translation().y<100&&c.translation().y>=20&&(h[_].nowSpeed+=.05,c.rotation().x<.04&&c.setRotation({w:c.rotation().w,x:.04,y:c.rotation().y,z:c.rotation().z})),c.translation().y<20&&c.translation().y>1&&c.lockRotations(!0,!0,!0,!0),c.setLinvel(o,!0),f.lookAt(f.position.x-(n.position.x-f.position.x),f.position.y-(n.position.y-f.position.y),f.position.z-(n.position.z-f.position.z)),c.setRotation({w:f.quaternion.w,x:c.rotation().x,y:f.quaternion.y,z:c.rotation().z}),b.userData.body.setRotation({w:f.quaternion.w,x:c.rotation().x,y:f.quaternion.y,z:c.rotation().z}),(X.rotation.y>0||X.rotation.y<0)&&L.userData.body.setRotation({w:L.userData.body.rotation().w,x:L.userData.body.rotation().x,y:0,z:L.userData.body.rotation().z}),(Z.rotation.y>0||Z.rotation.y<0)&&C.userData.body.setRotation({w:C.userData.body.rotation().w,x:C.userData.body.rotation().x,y:0,z:C.userData.body.rotation().z}),et.set(n.position,Rt);const r=et.intersectObjects(W);r.length>0&&(r[0].distance<.4?(n.userData.flying=!1,n.userData.onGround=!0):(n.userData.onGround=!1,n.userData.flying=!0)),c.linvel().z>0?n.userData.currentSpeed=c.linvel().z.toFixed(0):n.userData.currentSpeed=0,Ve.textContent=n.userData.currentSpeed,n.userData.left&&n.userData.onGround&&!n.userData.onStartArea&&(n.userData.hTransition<5&&(n.userData.hTransition+=h[_].maxHSpeed),h[_].nowSpeed-=.009),n.userData.right&&n.userData.onGround&&!n.userData.onStartArea&&(n.userData.hTransition>-5&&(n.userData.hTransition-=h[_].maxHSpeed),h[_].nowSpeed-=.009),h[_].resetHAngle&&!n.userData.left&&!n.userData.right&&(n.userData.hTransition<-h[_].maxHSpeed?n.userData.hTransition+=h[_].maxHSpeed:n.userData.hTransition>h[_].maxHSpeed?n.userData.hTransition-=h[_].maxHSpeed:n.userData.hTransition=0),n.position.z>ke.position.z?(n.userData.onStartArea==!0&&E&&document.querySelector(".anim_tap_top").classList.add("hidden_block"),n.userData.onStartArea==!0&&E&&document.querySelector(".anim_tap_left").classList.remove("hidden_block"),n.userData.onStartArea==!0&&E&&document.querySelector(".anim_tap_right").classList.remove("hidden_block"),n.userData.onStartArea==!0&&E&&setTimeout(()=>{document.querySelector(".anim_tap_left").classList.add("hidden_block"),document.querySelector(".anim_tap_right").classList.add("hidden_block")},2e3),n.userData.onStartArea=!1):n.userData.onStartArea=!0}function tt(e){if(n.userData.onGround){e=e.changedTouches[0];var t=J.domElement.getBoundingClientRect();$.x=(e.clientX-t.left)/t.width*2-1,$.y=-((e.clientY-t.top)/t.height)*2+1,Et.setFromCamera($,w),$.y>0&&n.userData.canBoostStep&&I&&n.userData.onStartArea&&c.linvel().z<h[_].maxSpeed&&c.linvel().y<5&&c.linvel().y>-5&&!z&&h[_].nowSpeed<h[_].maxSpeed&&(h[_].nowSpeed+=h[_].stepSpeed),n.userData.canBoostStep=!1,$.y<.5&&($.x>0?(n.userData.left=!1,n.userData.right=!0):(n.userData.right=!1,n.userData.left=!0))}}function Jt(e){n.userData.right=!1,n.userData.left=!1,n.userData.canBoostStep=!0}function Nt(e){switch(e.code){case"KeyW":case"ArrowUp":n.userData.canBoostStep&&I&&n.userData.onStartArea&&c.linvel().z<h[_].maxSpeed&&c.linvel().y<5&&c.linvel().y>-5&&!z&&h[_].nowSpeed<h[_].maxSpeed&&(h[_].nowSpeed+=h[_].stepSpeed),n.userData.canBoostStep=!1;break;case"KeyS":case"ArrowDown":break;case"KeyA":case"ArrowLeft":n.userData.left=!0;break;case"KeyD":case"ArrowRight":n.userData.right=!0;break}}function jt(e){switch(e.code){case"KeyW":case"ArrowUp":n.userData.canBoostStep=!0;break;case"KeyS":case"ArrowDown":break;case"KeyA":case"ArrowLeft":n.userData.left=!1;break;case"KeyD":case"ArrowRight":n.userData.right=!1;break}}function M(e){let t,o;const r=e.rotation.clone();e.rotation.set(0,0,0);const a=new U().setFromObject(e).getSize(new q);if(e.rotation.copy(r),e.name.includes("player")?(n.userData.size=a,n.userData.orgRotation=r,t=y.createRigidBody(m.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0,!1,!1).setLinearDamping(0).setAngularDamping(2)),o=m.ColliderDesc.cuboid(a.x/5,a.y/1.5,a.z/3).setMass(e.userData.mass).setRestitution(0).setFriction(0),c=t,Le=o,o.setActiveEvents(m.ActiveEvents.COLLISION_EVENTS),y.createCollider(o,t),n.userData.handle=c.handle,v.push([e,t,e.id])):e.name.includes("ground")&&(t=y.createRigidBody(m.RigidBodyDesc.fixed().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0)),o=m.ColliderDesc.cuboid(a.x/2,a.y/2,a.z/2).setMass(e.userData.mass).setRestitution(0).setFriction(0),y.createCollider(o,t),$e=t,Q.userData.handle=$e.handle,v.push([e,t,e.id])),e.name.includes("wall")){t=y.createRigidBody(m.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0,!0,!1).setLinearDamping(0)),o=m.ColliderDesc.cuboid(a.x/2,a.y/2,a.z/2).setMass(e.userData.mass*10).setRestitution(0).setFriction(40);let s=y.createCollider(o,t);Te.push(s),v.push([e,t,e.id])}if(e.name.includes("moving_block")){t=y.createRigidBody(m.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0,!0,!0,!0).setLinearDamping(0)),o=m.ColliderDesc.ball(a.x/2).setMass(e.userData.mass*10).setRestitution(0).setFriction(20);let s=t;Je.push(s);let S=y.createCollider(o,t);Te.push(S),v.push([e,t,e.id])}e.name.includes("itsmen_body")&&(t=y.createRigidBody(m.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0,!1,!0).setLinearDamping(0).setAngularDamping(0)),o=m.ColliderDesc.cuboid(a.x/2,a.y/2,a.z/2).setMass(0).setRestitution(0).setFriction(0).setDensity(2),b.userData.body=t,b.userData.collider=o,y.createCollider(o,t),v.push([e,t,e.id])),e.name.includes("itsmen_left_hand")&&(t=y.createRigidBody(m.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!1,!0,!1).setLinearDamping(0).setAngularDamping(0)),o=m.ColliderDesc.capsule(a.z/2,a.x/10).setMass(0).setRestitution(0).setFriction(0).setDensity(2),H.userData.body=t,H.userData.collider=o,y.createCollider(o,t),v.push([e,t,e.id])),e.name.includes("itsmen_right_hand")&&(t=y.createRigidBody(m.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!1,!0,!1).setLinearDamping(0).setAngularDamping(0)),o=m.ColliderDesc.capsule(a.z/2,a.x/10).setMass(0).setRestitution(0).setFriction(0).setDensity(2),B.userData.body=t,B.userData.collider=o,y.createCollider(o,t),v.push([e,t,e.id])),e.name.includes("itsmen_left_leg")&&(t=y.createRigidBody(m.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!1,!0,!1).setLinearDamping(0).setAngularDamping(0)),o=m.ColliderDesc.capsule(a.z/2,a.x/10).setMass(0).setRestitution(0).setFriction(0).setDensity(2),L.userData.body=t,L.userData.collider=o,y.createCollider(o,t),v.push([e,t,e.id])),e.name.includes("itsmen_right_leg")&&(t=y.createRigidBody(m.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!1,!0,!1).setLinearDamping(0).setAngularDamping(0)),o=m.ColliderDesc.capsule(a.z/2,a.x/10).setMass(0).setRestitution(0).setFriction(0).setDensity(2),C.userData.body=t,C.userData.collider=o,y.createCollider(o,t),v.push([e,t,e.id]))}document.addEventListener("visibilitychange",function(){var e,t;document.visibilityState==="visible"?(pe=!1,x&&F==!1&&(l==null||l.play()),c.linvel().z>3&&n.userData.onGround&&x&&F==!1&&(d==null||d.play()),!z&&I&&F==!1&&((e=ysdk.features.GameplayAPI)==null||e.start(),A.start(),A.elapsedTime=n.userData.time)):(pe=!0,(t=ysdk.features.GameplayAPI)==null||t.stop(),D!=null&&D.isPlaying&&D.pause(),l==null||l.stop(),d==null||d.stop(),F==!1&&!z&&I&&(n.userData.time=A.getElapsedTime(),A.stop()))});
