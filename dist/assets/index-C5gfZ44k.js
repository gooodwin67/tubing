import{C as ie,S as Ne,a as je,F as Ge,H as Ke,b as Pe,D as Ue,c as Ve,A as Xe,P as Ye,d as Qe,W as Ze,e as $e,V as f,R as se,G as be,B as J}from"./three-C4_QSHiD.js";import{O as c}from"./@dimforge-D3Mqfikn.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function a(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=a(r);fetch(r.href,n)}})();function re(e,a){e.geometry.computeBoundingBox(),a.forEach(function(n,s,D){n.children.length>0?n.children.forEach(function(i,z,We){i.geometry.computeBoundingBox()}):n.geometry.computeBoundingBox()}),e.updateMatrixWorld(),a.forEach(function(n,s,D){n.updateMatrixWorld()});let o=e.geometry.boundingBox.clone();o.applyMatrix4(e.matrixWorld);var r=!1;return a.forEach(function(n,s,D){if(n.children.length>0)n.children.forEach(function(i,z,We){let fe=i.geometry.boundingBox.clone();fe.applyMatrix4(i.matrixWorld),o.intersectsBox(fe)&&(r=i)});else{let i=n.geometry.boundingBox.clone();i.applyMatrix4(n.matrixWorld),o.intersectsBox(i)&&(r=n)}}),r}function xe(){let e=window.matchMedia||window.msMatchMedia;return e?e("(pointer:coarse)").matches:!1}let W=document.querySelector(".main_load"),Se=document.querySelector(".main_menu"),ve=document.querySelector(".select_level"),et=document.querySelector(".select_tube"),tt=document.querySelector(".finish_window"),at=document.querySelector(".finish_you_time span"),_e=document.querySelector(".boom_window"),ot=document.querySelectorAll("body>.overlay"),nt=document.querySelector(".startButton"),it=document.querySelectorAll(".load_level_wrap>div"),st=document.querySelectorAll(".load_level_wrap .level_time"),ze=document.querySelectorAll(".load_tubes_wrap>div"),Le=[],Re=[],ke=document.querySelector(".times"),le=document.querySelector(".current_time"),qe=document.querySelector(".best_time"),rt=document.querySelector(".finish_window .finish_again"),lt=document.querySelector(".finish_window .finish_in_menu"),dt=document.querySelector(".boom_window .finish_again"),ct=document.querySelector(".boom_window .finish_in_menu"),Ce=document.querySelector(".speed_block"),Ee=document.querySelector(".speed_block>.speed"),ut=document.querySelector(".shadow_check"),X=document.querySelector(".load_percent"),de=document.querySelector(".pause_button_wrap"),pt=document.querySelector(".close_pause_button"),mt=document.querySelector(".reset_button"),yt=document.querySelector(".inmenu_button"),Dt=document.querySelector(".menu_in_game_wrap"),Be=document.querySelector(".start_time"),Ae=document.querySelector(".start_time_wrap"),ht=document.querySelector(".clear_rec");ht.addEventListener("click",()=>{localStorage.clear()}),it.forEach((e,a)=>{e.addEventListener("click",async()=>{M=a+1,ze.forEach((o,r)=>{g[r].levels.includes(M)?(o.classList.remove("disabledTube"),g[r].canInLevel=!0):(o.classList.add("disabledTube"),g[r].canInLevel=!1)}),y(W),await V(!1,!0),y(et)})}),ze.forEach((e,a)=>{e.addEventListener("click",()=>{g[a].canInLevel&&(h=a,y(0),Y())})});function Y(){ke.classList.remove("hidden_block"),Ce.classList.remove("hidden_block"),Q[h].position.copy(l.translation());let e=3;ue=!0;let a=setInterval(o=>{Ae.classList.remove("hidden_block"),e++,e==4?(ue=!1,Be.textContent="GO",E=!0,de.classList.remove("hidden_block"),clearInterval(a),setTimeout(()=>{Ae.classList.add("hidden_block")},600)):Be.textContent=4-e},1e3)}nt.addEventListener("click",()=>{we=xe(),we&&document.body.requestFullscreen().then(()=>{screen.orientation.lock("landscape")}),Se.classList.add("hidden_block"),ve.classList.remove("hidden_block")});function y(e){ot.forEach(a=>{a.classList.add("hidden_block")}),e!=0&&e.classList.remove("hidden_block")}rt.addEventListener("click",async()=>{y(W),await P(),await V(!0,!0),y(0),Y()}),dt.addEventListener("click",async()=>{y(W),await P(),await V(!0,!0),y(0),Y()}),mt.addEventListener("click",async()=>{await P(),await V(!0,!0),y(0),Y()}),lt.addEventListener("click",async()=>{y(W),await P(),await ne()}),ct.addEventListener("click",async()=>{y(W),await P(),await ne()}),yt.addEventListener("click",async()=>{y(W),await P(),await ne()}),de.addEventListener("click",()=>{ue==!1&&E&&!L&&(y(Dt),t.userData.time=v.getElapsedTime(),v.stop(),N=!0)}),pt.addEventListener("click",()=>{y(0),v.start(),v.elapsedTime=t.userData.time,N=!1}),ut.onchange=function(){this.checked?(q.shadowMap.enabled=!0,d.traverse(e=>{e.material&&(e.material.needsUpdate=!0)})):(q.shadowMap.enabled=!1,d.traverse(e=>{e.material&&(e.material.needsUpdate=!0)}))};let u,Te=!0;performance.now();let gt=[],M=0,N=!1,t,l,ce,ue=!1,Q=[],h=0,I,pe,j=[],me,L;const g=[{hSpeed:10,maxHSpeed:.08,stepSpeed:1.5,maxSpeed:26,resetHAngle:!1,levels:[1,2,3,4,5,6],canInLevel:!1},{hSpeed:14,maxHSpeed:.12,stepSpeed:10,maxSpeed:180,resetHAngle:!1,levels:[4,5,6],canInLevel:!1},{hSpeed:14,maxHSpeed:.12,stepSpeed:3,maxSpeed:30,resetHAngle:!0,levels:[5,6],canInLevel:!1}];let Ie,b=[],T=new f,ye=new se,E=!1,De=!1,F,Me,Fe,p,B,A,x,S,Z,$,ee,G,K,he,H=[],te=[],ge=[],m,we=xe(),wt=new ie,v=new ie,ae=0,He=1/60,O=0,R=0,k;const Oe=new se,ft=new f(0,-1,0),d=new Ne;d.background=new je(14479094),d.fog=new Ge(d.background,1,300);const U=new Ke(16777215,16777215,2);U.color.setHSL(.6,1,.6),U.groundColor.setHSL(.095,1,.75),U.position.set(0,100,0),new Pe(U,10);const _=new Ue(16777215,3);_.position.set(1,2,.2),_.position.multiplyScalar(120),_.castShadow=!0,_.shadow.mapSize.width=2048,_.shadow.mapSize.height=2048;const oe=1e3;_.shadow.camera.left=-oe,_.shadow.camera.right=oe,_.shadow.camera.top=oe,_.shadow.camera.bottom=-oe,_.shadow.camera.far=3500,_.shadow.bias=-.001,new Ve(_,10),new Xe(11184810,1);const w=new Ye(85,document.body.offsetWidth/document.body.offsetHeight,.1,600);w.position.set(0,4,-10);let bt=new Qe;const q=new Ze;q.setSize(document.body.offsetWidth,document.body.offsetHeight),document.body.appendChild(q.domElement),q.shadowMap.enabled=!0,q.shadowMap.type=$e,window.addEventListener("resize",xt,!1);function xt(){w.aspect=document.body.offsetWidth/document.body.offsetHeight,w.updateProjectionMatrix(),q.setSize(document.body.offsetWidth,document.body.offsetHeight)}async function St(){localStorage.getItem("playerData")?k=JSON.parse(localStorage.getItem("playerData")):(k={levelsTimes:{}},localStorage.setItem("playerData",JSON.stringify(k))),JSON.stringify(k),st.forEach((e,a,o)=>{k.levelsTimes["time"+(a+1)]!=null?e.childNodes[1].textContent=k.levelsTimes["time"+(a+1)]:e.childNodes[1].textContent=0})}async function vt(){v=new ie,d.add(_),d.add(U),R=0,await c.init(),u=new c.World(new c.Vector3(0,-9.81,0)),await new be().loadAsync("models/map-menu.glb",onprogress=s=>{X.textContent=Math.round(s.loaded/s.total*100)+"%"}).then(s=>{const D=s.scene;X.textContent="0",D.traverse(i=>{if(i.name=="player")t=i.clone(),t.userData.vertices=t.geometry.attributes.position.array,t.userData.indices=t.geometry.index.array,t.castShadow=!0,t.receiveShadow=!0,t.material.transparent=!0,t.material.opacity=0,t.userData.mass=1,t.userData.playerBraking=!1,t.userData.hTransition=0,t.userData.currentSpeed=0,t.userData.boom=!1,t.userData.onStartArea=!0,t.userData.canBoostStep=!0,t.userData.time=0,t.userData.right=!1,t.userData.left=!1,t.userData.onGround=!1,t.userData.flying=!1,t.userData.origPosition=t.position,C(t),d.add(t);else if(i.name.includes("player-tube"))I=i.clone(),I.userData.startPosition=new f(I.position.x,I.position.y,I.position.z),Q[i.name.slice(-1)-1]=I,d.add(I);else if(i.name=="arrow_area")m=i.clone(),m.userData.hPos=0,d.add(m);else if(i.name.includes("ground"))new J().setFromObject(i).getSize(new f),F=i.clone(),F.receiveShadow=!0,F.userData.mass=0,C(F),H.push(F),d.add(F),i.name=="left_ground_wall"?Me=i.position:i.name=="right_ground_wall"&&(Fe=i.position);else if(i.name.includes("wall")){new J().setFromObject(i).getSize(new f);let z=i.clone();z.castShadow=!0,z.receiveShadow=!0,z.userData.mass=1,C(z),H.push(z),te.push(z),d.add(z)}else if(i.name.includes("area")){let z=i.clone();z.castShadow=!0,d.add(z)}else i.name.includes("start_flag")?(pe=i.clone(),d.add(pe)):i.name.includes("itsmen_body")?(p=i.clone(),p.material.transparent=!0,p.material.opacity=0,d.add(p),C(p)):i.name.includes("itsmen_left_hand")?(B=i.clone(),B.material.transparent=!0,B.material.opacity=0,d.add(B),C(B)):i.name.includes("itsmen_right_hand")?(A=i.clone(),A.material.transparent=!0,A.material.opacity=0,d.add(A),C(A)):i.name.includes("itsmen_left_leg")?(x=i.clone(),x.material.transparent=!0,x.material.opacity=0,d.add(x),C(x)):i.name.includes("itsmen_right_leg")?(S=i.clone(),S.material.transparent=!0,S.material.opacity=0,d.add(S),C(S)):i.name.includes("qmen_body")?(Z=i.clone(),d.add(Z)):i.name.includes("qmen_left_hand")?($=i.clone(),d.add($)):i.name.includes("qmen_right_hand")?(ee=i.clone(),d.add(ee)):i.name.includes("qmen_left_leg")?(G=i.clone(),d.add(G)):i.name.includes("qmen_right_leg")&&(K=i.clone(),d.add(K))})}),d.traverse(function(s){s.material&&(s.material.needsUpdate=!0)}),await St();let e=c.JointData.spherical({x:.2,y:0,z:-.2},{x:-.4,y:0,z:0});u.createImpulseJoint(e,p.userData.body,B.userData.body,!0);let a=c.JointData.spherical({x:-.2,y:0,z:-.2},{x:.4,y:0,z:0});u.createImpulseJoint(a,p.userData.body,A.userData.body,!0);let o=c.JointData.spherical({x:.22,y:0,z:.5},{x:0,y:0,z:-.5});u.createImpulseJoint(o,p.userData.body,x.userData.body,!0);let r=c.JointData.spherical({x:-.22,y:0,z:.5},{x:0,y:0,z:-.5});u.createImpulseJoint(r,p.userData.body,S.userData.body,!0);let n=c.JointData.spherical({x:0,y:0,z:0},{x:0,y:.5,z:0});he=u.createImpulseJoint(n,p.userData.body,l,!0),De=!0}async function _t(){L=!1;const e=new be,a="models/map"+M+".glb";await e.loadAsync(a,onprogress=o=>{X.textContent=Math.round(o.loaded/o.total*100)+"%"}).then(o=>{const r=o.scene;X.textContent="0",r.traverse(n=>{if(n.name.includes("ground")){new J().setFromObject(n).getSize(new f);let s=n.clone();s.receiveShadow=!0,s.userData.mass=0,s.name=n.name,C(s),H.push(s),d.add(s)}else if(n.name.includes("wall")){new J().setFromObject(n).getSize(new f);let s=n.clone();s.userData.mass=1,C(s),H.push(s),te.push(s),d.add(s)}else if(n.name.includes("moving_block")){const s=new J().setFromObject(n).getSize(new f);let D=n.clone();D.userData.size=s,D.userData.mass=1,D.userData.raycaster=new se,D.userData.speed=-n.name.substr(n.name.indexOf("speed")+6),D.userData.direction=new f(D.userData.speed,0,0),Le.push(D),C(D),te.push(D),d.add(D)}else if(n.name.includes("area")){let s=n.clone();s.castShadow=!0,s.receiveShadow=!0,d.add(s),n.name.includes("star_area")&&j.push(s)}else n.name.includes("finish_block")&&(me=n.clone(),d.add(me))})}),qe.textContent=k.levelsTimes["time"+M]}async function ne(){await V(!0,!1),Te?(y(Se),Te=!1):y(ve)}ne();async function V(e,a){e&&await vt(),a&&await _t()}async function P(){for(E=!1,De=!1,R=0,t.userData.time=0,t.userData.boom=!1,H=[],te=[],j=[],b=[],de.classList.add("hidden_block"),ke.classList.add("hidden_block"),Ce.classList.add("hidden_block"),v.start(),v.elapsedTime=t.userData.time,N=!1,t.userData.currentSpeed=0,Ee.textContent=t.userData.currentSpeed,R=0,le.textContent=R;d.children.length>0;){let e=d.children[0];e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(a=>a.dispose()):e.material.dispose()),d.remove(e)}L=!1}function zt(){if(performance.now(),De&&!L&&(we?t.userData.boom?w.lookAt(p.position):(w.lookAt(new f(w.position.x,t.position.y,t.position.z+5)),w.position.y=t.position.y+5,w.position.z=t.position.z-3):t.userData.boom?I.position.y>0&&w.lookAt(p.position):(w.lookAt(new f(w.position.x,t.position.y,t.position.z+5)),w.position.y=t.position.y+4,w.position.z=t.position.z-4),m.position.set(t.position.x,t.position.y,t.position.z+5)),E){L?y(tt):(R=v.getElapsedTime().toFixed(3),le.textContent=R,Rt(),Lt(),j.forEach((a,o,r)=>{a.rotation.z+=.05}),re(t,j)&&(console.log(re(t,j)),d.remove(re(t,j)))),t.position.x>Me.x-t.userData.size.x/1.3&&(m.position.x=t.position.x,t.userData.hTransition=-.4),t.position.x<Fe.x+t.userData.size.x/1.3&&(m.position.x=t.position.x,t.userData.hTransition=.4);let e=new c.EventQueue(!0);u.step(e),Q[h].position.copy(l.translation()),Q[h].quaternion.copy(l.rotation());for(let a=0,o=b.length;a<o;a++)b[a][0].position.copy(b[a][1].translation()),b[a][0].quaternion.copy(b[a][1].rotation());e.drainCollisionEvents((a,o,r)=>{ge.forEach((n,s)=>{l.handle==a&&n.handle==o&&!L?l.linvel().z<15&&t.userData.boom==!1&&(u.removeImpulseJoint(he),p.userData.body.applyImpulse({x:5,y:5,z:5},!0),p.userData.body.setEnabledRotations(!0),ce.setFriction(20),setTimeout(()=>{E=!1,y(_e)},2e3),t.userData.boom=!0):l.handle==a&&!L&&l.linvel().z<15&&t.position.y<5&&t.userData.boom==!1&&(u.removeImpulseJoint(he),p.userData.body.applyImpulse({x:5,y:5,z:5},!0),p.userData.body.setEnabledRotations(!0),ce.setFriction(20),t.userData.boom=!0,setTimeout(()=>{E=!1,y(_e)},2e3))})})}bt.update()}q.setAnimationLoop(()=>{ae+=wt.getDelta(),ae>He&&!N&&(zt(),q.render(d,w),ae=ae%He)}),document.addEventListener("touchend",qt),document.addEventListener("touchstart",Je),document.addEventListener("touchmove",Je),window.addEventListener("keydown",Ct),window.addEventListener("keyup",Et),document.addEventListener("mousedown",kt,!1);function Lt(){Le.forEach((e,a)=>{let o=e,r=Re[a];r.setLinvel(o.userData.direction,!0),r.setAngvel({x:o.userData.direction.z,y:o.userData.direction.y,z:-o.userData.direction.x},!0);const n=o.userData.direction;o.userData.raycaster.set(new f(o.position.x,.4,o.position.z),n.clone().normalize());const s=o.userData.raycaster.intersectObjects(H);s.length>0&&s[0].distance<o.userData.size.x/2&&(o.userData.direction.x=o.userData.direction.x*-1)})}function Rt(){Z.position.copy(p.position),Z.rotation.copy(p.rotation),$.position.copy(B.position),$.rotation.copy(B.rotation),ee.position.copy(A.position),ee.rotation.copy(A.rotation),G.position.copy(x.position),G.rotation.copy(x.rotation),K.position.copy(S.position),K.rotation.copy(S.rotation),t.position.z>me.position.z&&(R=v.getElapsedTime().toFixed(3),le.textContent=R,L=!0,at.textContent=R,k.levelsTimes["time"+M]!=null?O=k.levelsTimes["time"+M]:O=0,(R<O||O==0)&&(O=R,qe.textContent=O,k.levelsTimes["time"+M]=O,localStorage.setItem("playerData",JSON.stringify(k))),t.position.z=0),m.position.x+=t.userData.hTransition;const e=new f().subVectors(l.translation(),m.position).normalize();m.lookAt(m.position.x-(t.position.x-m.position.x),m.position.y-(t.position.y-m.position.y),m.position.z-(t.position.z-m.position.z)),l.setRotation({w:m.quaternion.w,x:l.rotation().x,y:m.quaternion.y,z:l.rotation().z}),p.userData.body.setRotation({w:m.quaternion.w,x:l.rotation().x,y:m.quaternion.y,z:l.rotation().z}),(G.rotation.y>0||G.rotation.y<0)&&x.userData.body.setRotation({w:x.userData.body.rotation().w,x:x.userData.body.rotation().x,y:0,z:x.userData.body.rotation().z}),(K.rotation.y>0||K.rotation.y<0)&&S.userData.body.setRotation({w:S.userData.body.rotation().w,x:S.userData.body.rotation().x,y:0,z:S.userData.body.rotation().z}),l.setLinvel({x:e.x*-g[h].hSpeed,y:l.linvel().y,z:l.linvel().z}),Oe.set(t.position,ft);const a=Oe.intersectObjects(H);if(a.length>0&&(a[0].distance<.4?(t.userData.flying=!1,!t.userData.onGround&&t.userData.flying,t.userData.onGround=!0):(t.userData.onGround=!1,t.userData.flying=!0)),l.linvel().z>0?t.userData.currentSpeed=l.linvel().z.toFixed(0):t.userData.currentSpeed=0,Ee.textContent=t.userData.currentSpeed,t.userData.left&&t.userData.onGround){t.userData.hTransition<5&&(t.userData.hTransition+=g[h].maxHSpeed);let o=l.linvel();o.z*=.9996,l.setLinvel(o,!0)}if(t.userData.right&&t.userData.onGround){t.userData.hTransition>-5&&(t.userData.hTransition-=g[h].maxHSpeed);let o=l.linvel();o.z*=.9996,l.setLinvel(o,!0)}g[h].resetHAngle&&!t.userData.left&&!t.userData.right&&(t.userData.hTransition<-g[h].maxHSpeed?t.userData.hTransition+=g[h].maxHSpeed:t.userData.hTransition>g[h].maxHSpeed?t.userData.hTransition-=g[h].maxHSpeed:t.userData.hTransition=0),t.position.z>pe.position.z?t.userData.onStartArea=!1:t.userData.onStartArea=!0}function Je(e){if(t.userData.onGround){e=e.changedTouches[0];var a=q.domElement.getBoundingClientRect();T.x=(e.clientX-a.left)/a.width*2-1,T.y=-((e.clientY-a.top)/a.height)*2+1,ye.setFromCamera(T,w),T.y>0&&t.userData.canBoostStep&&E&&t.userData.onStartArea&&l.linvel().z<g[h].maxSpeed&&l.linvel().y<5&&l.linvel().y>-5&&!L&&l.applyImpulse({x:0,y:0,z:g[h].stepSpeed},!0),t.userData.canBoostStep=!1,T.y<0&&(T.x>0?(t.userData.left=!1,t.userData.right=!0):(t.userData.right=!1,t.userData.left=!0))}}function kt(e){e.preventDefault();var a=q.domElement.getBoundingClientRect();T.x=(e.clientX-a.left)/a.width*2-1,T.y=-((e.clientY-a.top)/a.height)*2+1,ye.setFromCamera(T,w),gt.forEach(o=>{o.geometry.computeBoundingBox();var r=o.geometry.boundingBox.clone();r.applyMatrix4(o.matrixWorld),ye.ray.intersectBox(r,new f)})}function qt(e){t.userData.right=!1,t.userData.left=!1,t.userData.canBoostStep=!0}function Ct(e){switch(e.code){case"KeyW":case"ArrowUp":t.userData.canBoostStep&&E&&t.userData.onStartArea&&l.linvel().z<g[h].maxSpeed&&l.linvel().y<5&&l.linvel().y>-5&&!L&&l.applyImpulse({x:0,y:0,z:g[h].stepSpeed},!0),t.userData.canBoostStep=!1;break;case"KeyS":case"ArrowDown":l.applyImpulse({x:0,y:0,z:-g[h].stepSpeed/2},!0),t.userData.playerBraking=!0;break;case"KeyA":case"ArrowLeft":t.userData.left=!0;break;case"KeyD":case"ArrowRight":t.userData.right=!0;break}}function Et(e){switch(e.code){case"KeyW":case"ArrowUp":t.userData.canBoostStep=!0;break;case"KeyS":case"ArrowDown":l.linvel().y<.1&&(t.userData.playerBraking=!1);break;case"KeyA":case"ArrowLeft":t.userData.left=!1;break;case"KeyD":case"ArrowRight":t.userData.right=!1;break}}function C(e){let a,o;const r=e.rotation.clone();e.rotation.set(0,0,0);const n=new J().setFromObject(e).getSize(new f);if(e.rotation.copy(r),e.name.includes("player")?(t.userData.size=n,t.userData.orgRotation=r,a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0,!1,!1).setLinearDamping(0).setAngularDamping(2)),o=c.ColliderDesc.cuboid(n.x/5,n.y/1.5,n.z/3).setMass(e.userData.mass).setRestitution(0).setFriction(0),l=a,ce=o,o.setActiveEvents(c.ActiveEvents.COLLISION_EVENTS),u.createCollider(o,a),t.userData.handle=l.handle,b.push([e,a,e.id])):e.name.includes("ground")&&(a=u.createRigidBody(c.RigidBodyDesc.fixed().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0)),o=c.ColliderDesc.cuboid(n.x/2,n.y/2,n.z/2).setMass(e.userData.mass).setRestitution(0).setFriction(0),u.createCollider(o,a),Ie=a,F.userData.handle=Ie.handle,b.push([e,a,e.id])),e.name.includes("wall")){a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0,!0,!1).setLinearDamping(0)),o=c.ColliderDesc.cuboid(n.x/2,n.y/2,n.z/2).setMass(e.userData.mass*10).setRestitution(0).setFriction(40);let s=u.createCollider(o,a);ge.push(s),b.push([e,a,e.id])}if(e.name.includes("moving_block")){a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0,!0,!0,!0).setLinearDamping(0)),o=c.ColliderDesc.ball(n.x/2).setMass(e.userData.mass*10).setRestitution(0).setFriction(20);let s=a;Re.push(s);let D=u.createCollider(o,a);ge.push(D),b.push([e,a,e.id])}e.name.includes("itsmen_body")&&(a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!0,!1,!0).setLinearDamping(0).setAngularDamping(0)),o=c.ColliderDesc.cuboid(n.x/2,n.y/2,n.z/2).setMass(0).setRestitution(0).setFriction(0).setDensity(2),p.userData.body=a,p.userData.collider=o,u.createCollider(o,a),b.push([e,a,e.id])),e.name.includes("itsmen_left_hand")&&(a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!1,!0,!1).setLinearDamping(0).setAngularDamping(0)),o=c.ColliderDesc.capsule(n.z/2,n.x/10).setMass(0).setRestitution(0).setFriction(0).setDensity(2),B.userData.body=a,B.userData.collider=o,u.createCollider(o,a),b.push([e,a,e.id])),e.name.includes("itsmen_right_hand")&&(a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!1,!0,!1).setLinearDamping(0).setAngularDamping(0)),o=c.ColliderDesc.capsule(n.z/2,n.x/10).setMass(0).setRestitution(0).setFriction(0).setDensity(2),A.userData.body=a,A.userData.collider=o,u.createCollider(o,a),b.push([e,a,e.id])),e.name.includes("itsmen_left_leg")&&(a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!1,!0,!1).setLinearDamping(0).setAngularDamping(0)),o=c.ColliderDesc.capsule(n.z/2,n.x/10).setMass(0).setRestitution(0).setFriction(0).setDensity(2),x.userData.body=a,x.userData.collider=o,u.createCollider(o,a),b.push([e,a,e.id])),e.name.includes("itsmen_right_leg")&&(a=u.createRigidBody(c.RigidBodyDesc.dynamic().setTranslation(e.position.x,e.position.y,e.position.z).setRotation(e.quaternion).setCanSleep(!1).enabledRotations(!1,!0,!1).setLinearDamping(0).setAngularDamping(0)),o=c.ColliderDesc.capsule(n.z/2,n.x/10).setMass(0).setRestitution(0).setFriction(0).setDensity(2),S.userData.body=a,S.userData.collider=o,u.createCollider(o,a),b.push([e,a,e.id]))}document.addEventListener("visibilitychange",function(){document.visibilityState==="visible"?!L&&E&&N==!1&&(v.start(),v.elapsedTime=t.userData.time):N==!1&&!L&&E&&(t.userData.time=v.getElapsedTime(),v.stop())});
